# Data Utils Datasets

[_Documentation generated by Documatic_](https://www.documatic.com)

<!---Documatic-section-Codebase Structure-start--->
## Codebase Structure

<!---Documatic-block-system_architecture-start--->
```mermaid
None
```
<!---Documatic-block-system_architecture-end--->

# #
<!---Documatic-section-Codebase Structure-end--->

<!---Documatic-section-data_utils.datasets.hierarchy_dataset-start--->
## data_utils.datasets.hierarchy_dataset

<!---Documatic-section-hierarchy_dataset-start--->
```mermaid
flowchart LR
data_utils.datasets.hierarchy_dataset-->data_utils.datasets.LmdbVer2Dataset
```

### Object Calls

* data_utils.datasets.LmdbVer2Dataset

<!---Documatic-block-data_utils.datasets.hierarchy_dataset-start--->
<details>
	<summary><code>data_utils.datasets.hierarchy_dataset</code> code snippet</summary>

```python
def hierarchy_dataset(root, select_data=None, training=True, img_w=256, img_h=32, transform=None, target_transform=None, case_sensitive=True, convert_to_gray=True):
    dataset_list = []
    if select_data is not None:
        select_data = select_data.split('-')
        for select_d in select_data:
            dataset = LmdbVer2Dataset(lmdb_dir_root=os.path.join(root, select_d), training=training, img_w=img_w, img_h=img_h, transform=transform, target_transform=target_transform, case_sensitive=case_sensitive, convert_to_gray=convert_to_gray)
            dataset_list.append(dataset)
    concatenated_dataset = ConcatDataset(dataset_list)
    return concatenated_dataset
```
</details>
<!---Documatic-block-data_utils.datasets.hierarchy_dataset-end--->
<!---Documatic-section-hierarchy_dataset-end--->

# #
<!---Documatic-section-data_utils.datasets.hierarchy_dataset-end--->

<!---Documatic-section-data_utils.datasets.get_datasets_image_label_with_txt_file-start--->
## data_utils.datasets.get_datasets_image_label_with_txt_file

<!---Documatic-section-get_datasets_image_label_with_txt_file-start--->
<!---Documatic-block-data_utils.datasets.get_datasets_image_label_with_txt_file-start--->
<details>
	<summary><code>data_utils.datasets.get_datasets_image_label_with_txt_file</code> code snippet</summary>

```python
def get_datasets_image_label_with_txt_file(txt_file, img_root, split=','):
    image_names = []
    labels = []
    with open(txt_file, encoding='utf-8') as f:
        lines = f.readlines()
        for line in lines:
            splited = line.strip().rstrip('\n').split(split)
            image_name = splited[0]
            label = split.join(splited[1:])
            if len(label) > LabelTransformer.max_length and LabelTransformer.max_length != -1:
                continue
            image_name = os.path.join(img_root, image_name)
            image_names.append(image_name)
            labels.append(label)
    return (image_names, labels)
```
</details>
<!---Documatic-block-data_utils.datasets.get_datasets_image_label_with_txt_file-end--->
<!---Documatic-section-get_datasets_image_label_with_txt_file-end--->

# #
<!---Documatic-section-data_utils.datasets.get_datasets_image_label_with_txt_file-end--->

<!---Documatic-section-data_utils.datasets.get_dataset_image_and_label_with_json_file-start--->
## data_utils.datasets.get_dataset_image_and_label_with_json_file

<!---Documatic-section-get_dataset_image_and_label_with_json_file-start--->
<!---Documatic-block-data_utils.datasets.get_dataset_image_and_label_with_json_file-start--->
<details>
	<summary><code>data_utils.datasets.get_dataset_image_and_label_with_json_file</code> code snippet</summary>

```python
def get_dataset_image_and_label_with_json_file(txt_file, img_root):
    image_names = []
    labels = []
    with open(txt_file, encoding='utf-8') as f:
        lines = f.readlines()
        for line in lines:
            line = line.strip().rstrip('\n')
            lineobj = json.loads(line)
            label = lineobj['Label']
            if len(label) > LabelTransformer.max_length and LabelTransformer.max_length != -1:
                continue
            image_name = lineobj['ImageFile']
            image_name = os.path.join(img_root, image_name)
            image_names.append(image_name)
            labels.append(label)
    return (image_names, labels)
```
</details>
<!---Documatic-block-data_utils.datasets.get_dataset_image_and_label_with_json_file-end--->
<!---Documatic-section-get_dataset_image_and_label_with_json_file-end--->

# #
<!---Documatic-section-data_utils.datasets.get_dataset_image_and_label_with_json_file-end--->

[_Documentation generated by Documatic_](https://www.documatic.com)